"use strict";(self["webpackChunkvue_axios"]=self["webpackChunkvue_axios"]||[]).push([[928],{5928:function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"home"},[i("h1",[e._v("前后端分离小demo")]),i("el-table",{attrs:{data:e.table,stripe:"","cell-style":{textAlign:"center"},"header-cell-style":{textAlign:"center"}}},[i("el-table-column",{attrs:{prop:"id",label:"ID",width:"100",sortable:""}}),i("el-table-column",{attrs:{prop:"name",label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{attrs:{type:"info",effect:"plain"}},[e._v(e._s(t.row.name))])]}}])}),i("el-table-column",{attrs:{prop:"age",label:"年龄"}}),i("el-table-column",{attrs:{prop:"sex",label:"性别"}}),i("el-table-column",{attrs:{label:"操作",width:"210"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-edit",round:""},on:{click:function(i){return e.handEdit(t.$index,t.row)}}},[e._v("编辑")]),i("el-popconfirm",{attrs:{title:"确认删除吗？"},on:{confirm:function(i){return e.handDelete(t.$index,t.row)}}},[i("el-button",{attrs:{slot:"reference",type:"danger",size:"mini",icon:"el-icon-delete",round:""},slot:"reference"},[e._v("删除")])],1)]}}])},[i("template",{slot:"header"},[i("span",{staticClass:"op"},[e._v("操作")]),i("el-button",{staticClass:"add",attrs:{size:"mini",icon:"el-icon-plus"},on:{click:e.add}},[e._v("添加一条记录")])],1)],2)],1),i("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"30%","before-close":e.handleClose}},[i("el-form",{ref:"form",attrs:{model:e.form,"status-icon":"",rules:e.rules,"label-width":"60px"}},[i("el-form-item",{attrs:{label:"姓名",prop:"name"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"年龄",prop:"age"}},[i("el-input",{attrs:{type:"number",min:"1",max:"99",autocomplete:"off"},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1),i("el-form-item",{attrs:{label:"性别",prop:"sex"}},[i("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[i("el-radio",{attrs:{label:"男"}}),i("el-radio",{attrs:{label:"女"}}),i("el-radio",{attrs:{label:"未知"}})],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.reset}},[e._v("重置")]),i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)],1)},l=[],o={name:"Home",data(){var e=(e,t,i)=>{""===t||void 0===t?i(new Error("请输入年龄")):isNaN(t)?i(new Error("请输入数字")):t<1||t>100?i(new Error("年龄必须在1~100之间")):i()};return{table:[],dialogVisible:!1,title:"",form:{},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],age:[{required:!0,validator:e,trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}]}}},created(){this.init()},methods:{init(){this.$axios.get("/all").then((e=>{200==e.code&&(this.table=e.data)}))},add(){this.dialogVisible=!0,this.title="添加记录",this.form={}},handEdit(e,t){this.dialogVisible=!0,this.title="编辑记录",this.form=JSON.parse(JSON.stringify(t))},handDelete(e,t){let i=JSON.parse(JSON.stringify(t)).id;this.$axios.delete(`/delete?id=${i}`).then((e=>{200==e.code?(this.$notify.success({title:"成功",message:e.msg,duration:2e3}),this.init()):this.$notify.success({title:"失败",message:e.msg,duration:2e3})}))},handleClose(){this.dialogVisible=!1,this.init()},reset(){let e;"id"in this.form&&(e=this.form.id),this.form={},void 0!=e&&(this.form.id=e)},save(){this.$refs["form"].validate((e=>{e&&(console.log(this.form),"id"in this.form?this.$axios.put("/update",this.form).then((e=>{if(200==e.code){let t=this;this.$notify.success({title:"成功",message:e.msg,duration:2e3,onClose:()=>t.handleClose()})}else this.$notify.error({title:"错误",message:e.msg,duration:2e3})})):this.$axios.post("/add",this.form).then((e=>{if(200==e.code){let t=this;this.$notify.success({title:"成功",message:e.msg,duration:2e3,onClose:()=>t.handleClose()})}else this.$notify.error({title:"错误",message:e.msg,duration:2e3})})))}))}}},r=o,a=i(1001),n=(0,a.Z)(r,s,l,!1,null,null,null),d=n.exports}}]);
//# sourceMappingURL=928.28b51b97.js.map